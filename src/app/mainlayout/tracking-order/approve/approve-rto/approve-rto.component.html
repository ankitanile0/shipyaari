<div [innerHTML]="Loader"></div>
<app-toastr></app-toastr>
<div class="main-content">
   <section class="section">
      <div class="d-flex space-between align-items-center m-b-15">
         <div class="crumb">
            <!-- <h4>Approve RTO</h4> -->
            <!-- <ol class="breadcrumb p-0 m-b-0"> -->
              <!--  <li class="breadcrumb-item"><a href="javascript:" (click)="go_to_home()">Home</a></li>
               <li class="breadcrumb-item active" aria-current="page">Approve RTO</li> -->
              <!--   <button type="button" class="btn btn-secondary rad_0 " (click)="go_to_trackingpage()">Tracking</button>
                  <button type="button" class="btn btn-secondary rad_0 dash_tab"  (click)="go_to_approve_rto()">Approve RTO</button>
                  <button type="button" class="btn btn-secondary rad_0"  (click)="go_to_approve_pickup()">Approve Pickup</button>
            </ol> -->
            <div class="breadcrumb-new flat">
               <a href="javascript:" (click)="go_to_trackingpage()" >Tracking</a>
               <a href="javascript:" (click)="go_to_approve_rto()" class="active">Approve RTO</a>
               <a href="javascript:" (click)="go_to_approve_pickup()">Approve Pickup</a>
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-lg-12">
            <div class="card">
               <div class="card-header">
                  <h4>Approve RTO</h4>
               </div>
               <div class="card-body pt-1">
                  <div class="col-lg-12 m-t-10">
                     <div class="row">
                        <div class="col-lg-6 col-md-6 col-xl-6 col-xs-6 all-ord" >
                           <button *ngIf="list[0] != undefined" class="btn btn-primary btn-sm mr-1"  tooltip="Download Report" (click)="download_repor()"><i class="fa fa-download"></i></button>
                           <button *ngIf="maniflag == 1" class="btn btn-primary btn-sm mr-1"  tooltip="Download Report" (click)="dowbload_mainfest()">Download Manifest</button>
                           <button *ngIf="list[0] != undefined" class="btn btn-primary btn-sm" tooltip="Create Batch"  (click)="creat_batch()">Create Batch</button>
                        </div>
                        <div class="col-lg-6 col-md-6 col-xl-6 col-xs-6 text-right">
                           <div class="form-group d-flex mb-0">
                              <div class="input-group mb-3 mr-1">
                                 <input type="text" class="form-control" placeholder="Tracking Number" [(ngModel)]="tracking_number" aria-label="">
                                 <div class="input-group-append">
                                    <button class="btn btn-primary btn-sm" (click)="search_track()" type="button">Search</button>
                                 </div>
                              </div>
                              <div class="mr-1">
                                 <p class="mt-2 mr-2 ml-2">OR</p>
                              </div>
                              <div class="mr-1">
                                 <button class="btn btn-primary btn-sm" (click)="moalupload(file)" >Import</button>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="row">
                        <div class="col-lg-12 col-md-12">
                           <div class="table-responsive m-t-10" >
                              <table class="table table-striped table-order" id="save-stage" style="width:100%; font-size: 13px;">
                                 <thead class="text-center">
                                    <tr>
                                    	<th></th>
                                       <th>Tracking Number</th>
                                       <th>Shipyaari Id</th>
                                       <th>Order Id</th>
                                       <th>Customer Name</th>
                                       <th>Status</th>
                                       <th>Action</th>
                                    </tr>
                                 </thead>
                                 <tbody style="font-size: 13px;" class="black">
                                    <tr *ngFor ="let data of list; let i = index">
                                     <td>
                                        <div class="form-check">
                                          <div class="custom-control custom-checkbox">
                                            <input  type="checkbox" name="" id="" [(ngModel)]="data.checked" checked="true" (click)="changeSelection()">
                                          </div>
                                      </div>
                                     </td>
                                     <td><p class="text-success"> <i class="fas fa-road"></i> &nbsp;{{data.tracking_number}}</p></td>
                                     <td><p class="text-primary">{{data.avn_shipping_id}}</p></td>
                                     <td><p class="text-primary">{{data.client_order_id}}</p></td>
                                     <td><p class="text-primary">{{data.full_name}}</p></td>
                                     <td><p class="text-dark">{{data.description}}</p></td>
                                     <td><a href="javascript:" (click)="delete(i)"><i class="fa fa-trash text-primary" tooltip="Delete"></i></a></td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>
</div>


<ng-template #file>
   <div class="modal-header head-modal">
      <h5 class="modal-title" id="exampleModalLabel">Import bulk tracking number</h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="close_modal()"> 
      <span aria-hidden="true">&times;</span> 
      </button>
   </div>
   <div class="modal-body">
      <div class="row">
      	<div class="col">
      		<button class="btn btn-primary btn-sm" (click)="download_sheet()" >Download sample Sheet</button>
      	</div>
      	
      </div>
      <div class="row mt-1">
      	<div class="col">
            <div class="form-group">
               <label>Upload File</label>
               <input type="file" name="" id="sheet" [(ngModel)]="sheet" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">
            </div>
            
      	</div>
      </div>
   </div>
   <div class="modal-footer">
      <button type="button" (click)="upload_sheet()" class="btn btn-primary btn-sm"> Upload</button>
      <button type="button" (click)="close_modal()" class="btn btn-primary btn-sm"> Close</button>
   </div>
</ng-template>